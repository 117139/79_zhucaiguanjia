<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>筑采管家</title>
		<meta name="keywords" content="筑采管家">
		<meta name="Description" content="筑采管家">
		<meta name="renderer" content="webkit">
		<meta name=renderer content=webkit>
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
		<link rel="stylesheet" type="text/css" href="./css/public.css" />
		<link rel="stylesheet" type="text/css" href="./js/swiper/css/swiper.min.css" />
		<script src="./js/jquery.min.js"></script>
		<script src="js/include.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/layer/layer.js"></script>
		<script src="./js/swiper/js/swiper4.min.js"></script>
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/IPurl.js" type="text/javascript" charset="utf-8"></script>
		<link href="js/pagination/pagination.css" rel="stylesheet" type="text/css" />
		<script src="js/pagination/jquery.pagination.js"></script>
		<style type="text/css">
			.menus{
				width: 1200px;
				justify-content: space-between;
				margin: 0 auto;
				padding: 92px 0 55px 0;
			}
			.menu{
				flex: 1;
				height: 34px;
				border-left: #CCCCCC dashed 1px;
				align-items: center;
				justify-content: center;
			}
			.menu:last-of-type{
				border-right: #CCCCCC dashed 1px;
			}
			.menu img{
				max-width: 60px;
				max-height: 60px;
			}
			.menu span{
				font-size: 16pxs;
				color: #797979;
				padding-left: 14px;
			}
			
			/* *,ul,li,p,a{padding: 0;margin: 0;list-style: none;outline: none;color: #000000;} */
			*,ul,li,p,a{padding: 0;margin: 0;list-style: none;outline: none;}
			#qnhzCot_ct{
				background-color: #f7f7f7; 
			}
			.smallNav_ct{
				height: 58px;
				font-size: 12px;
				align-items: center;
			}
			.smallNav_ct img{
				margin: 0 3px;
			}
			.snActive_ct{
				color: #eb5f33;
			}
			.qnhzLeft_ct{
				width: 815px;
			}
			.qnhzLeft_ct>div{
				background-color: #fff;
				padding: 44px 28px;
			}
			.qnhzLeft_ct>div:last-of-type{
				background-color: #fff;
				padding: 20px 28px 57px 28px;
			}
			.qnhzRight_ct{
				width: 372px;
				padding: 28px 12px 18px;
				background-color: #fff;
				height: 100%;
			}
			.qnhzRight_ct>div{
				margin-bottom: 16px;
			}
			.leTo_ct{
				margin-bottom: 12px;
			}
			.otop_ct{
				font-size: 28px;
				color: #333333;
			}
			.lxrNum_ct{
				font-size: 12px;
				margin-left: 13px;
				color: #999999;
			}
			.otop_ct>span:last-of-type{
				float: right;
				color: #ff552e;
			}
			.ocent_ct{
				font-size: 12px;
				padding: 48px 0;
				/* height: 23px; */
				line-height: 23px;
			}
			.leTo_ct>button{
				width: 280px;
				height: 52px;
				background-color: #ff552e;
				color: #fff;
				font-size: 19px;
				border: none;
			}
			.ocent_ct img{
				max-width: 12px;
				max-height: 12px;
				margin-right: 5px;
			}
			.ocent_ct button{
				width: 67px;
				height: 23px;
				border-radius: 100px;
				border: none;
				background-color: #eeeeee;
				margin: 0 5px 0 13px;
			}
			.rTit_ct{
				font: 20px;
				align-items: center;
				font-weight: bold;
			}
			.rTit_ct img{
				max-width: 19px;
				max-height: 22px;
				margin-right: 12px;
			}
			.tjgzLists_ct{
				width: 345px;
				height: 126px;
				background-color: #f5f6fc;
				margin-left: 3px;
				padding: 26px 15px 20px 22px;
				align-items: center;
			}
			.rlcoont_ct{
				flex-direction: column;
			}
			.rlcoont_ct span{
				font-size: 12px;
			}
			.rlcoont_ct span:nth-child(1){
				font-size: 17px;
				color: #333333;
			}
			.rlcoont_ct span:nth-child(2){
				color: #7e7f80;
				margin: 20px 0;
			}
			.rlcoont_ct span:nth-child(3){
				color: #ff552e;
			}
			.rrbox_ct{
				width: 120px;
				height: 44px;
				border: 1px solid #ff552e;
				text-align: center;
				line-height: 44px;
			}
			.rrbox_ct span{
				font-size: 17px;
				color: #ff6c4c;
			}
			.leBo_ct>h6{
				font-size: 20px;
				margin-bottom: 30px;
			}
			.sgjy_ct{
				margin-bottom: 18px;
			}
			.sgjy_ct span{
				font-size: 12px;
				color: #333333;
			}
			.sgjyImgs_ct,.tdjsImg_ct{
				margin-top: 10px;
			}
			.sgjyImgs_ct .xq_img{
				width: 131px;
				height: 131px;
				margin: 0 10px;
			}
			.tdjsImg_ct{
				
			}
			.zwjstme_ct{
				font-size: 12px;
				color: #333333;
			}
			.zwjstme_ct span{
				color: #999999;
			}
			.xmjs_ct{
				padding: 16px 10px;
			}
			.fwxmtel_ct{
				padding-left: 30px;
			}
			[v-cloak]{
			    display:none !important;
			}
			.scicon_img{
				font-size: 14px;
				margin-right: 3px;
			}
		</style>
		<script src="js/vue.min.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		
		<div class="w100" style="height: 187px;">
			<div class="header_top">
				<include src="./common/header.html"></include>
				<!-- <include src="http://www.wanbonet.com/suxin/79_zhucaiguanjia/common/header.html"></include> -->
			</div>
			<include src="./common/header1.html"></include>
			<!-- <include src="http://www.wanbonet.com/suxin/79_zhucaiguanjia/common/header1.html"></include> -->
		
		
			<!-- header -->
		
			<include src="./common/header_header.html"></include>
		</div>
		<!-- 中间内容部分 -->
		<div id="qnhzCot_ct" class="html_main" v-cloak>
			
			<!-- <button style="width: 100px;height: 40px;margin: 0 auto;" @click="vip">会员/非会员</button> -->
			<div class="w1200">
				<div class="smallNav_ct flex">
					<a class="c9" href="index.html">首页</a>
					<img src="img/jiantou.jpg" alt="">
					<a class="c9" href="qnhz.html?header_cur=2">圈内合作</a>
					<img src="img/jiantou.jpg" alt="">
					<a href="" class="snActive_ct">详情页</a>
				</div>
				<div class="w1200 flex ju_b">
					<div class="qnhzLeft_ct">
						<div class="leTo_ct">
							<div class="otop_ct">
								<span>{{datas.title}}</span>
								<span class="lxrNum_ct" v-show="user_datas.vip_id!=0">{{datas.touch_sum?datas.touch_sum:0}}人联系</span>
								<span>{{datas.work_time}}</span>
							</div>
							<div class="flex ju_b ocent_ct">
								<div style="max-width: 500px;">
									<img src="img/qnhzdw.jpg" >
									<span>{{datas.area}}  {{datas.province}}  {{datas.city}}  {{datas.district}}</span>
									<span class="fwxmtel_ct" v-if="user_datas.vip_id!=0">联系电话 : {{datas.mobile}}</span>
								</div>
								<div v-if="mytype!=1">
									<button @click="deleteCollect" v-if="datas.is_collect" class="cpointer"><span class="iconfont icon-shoucang scicon_img" style="color: #f00;"></span>已收藏</button>
									<button @click="collect" v-else class="cpointer"><span class="iconfont icon-shoucang1 scicon_img"></span>收藏</button>
									<button @click="report_fuc" class="cpointer"><img src="img/qnhz_jb.jpg" alt="">举报</button>
								</div>
							</div>
							<button v-if="user_datas.vip_id!=0" @click="opentel(datas.mobile)" class="cpointer">合作洽谈</button>
						</div>
						<div class="leBo_ct">
							<h6>项目描述</h6>
							<div class="zwjstme_ct" v-if="user_datas.vip_id>0">
								<p v-if="datas.end_time">招募截止时间<span> : {{gettime(datas.end_time,'-')}}</span></p>
								<p v-if="datas.pay_time">项目交付时间<span> : {{gettime(datas.pay_time,'-')}}</span></p>
							</div>
							<div class="sgjy_ct"  >
								<span v-if="hz_type==0">施工经验</span>
								<span v-else>项目资质</span>
								<div class="sgjyImgs_ct dis_flex fww">
									<!-- <img src="img/qnhzgc1.jpg" alt=""> -->
									<div class="xq_img bg_div" v-for="(item,index) in json_p(datas.desc_pic)">
										<div :style="'background-image: url('+getimg(item.url)+ ');'"></div>
									</div>
								</div>
							</div>
							<div class="sgjy_ct">
								<span  v-if="hz_type==0">团队介绍</span>
								<span v-else>项目介绍</span>
								<div class="tdjsImg_ct">
									<div v-if="user_datas.vip_id>0" class="xmjs_ct fwb_box" v-html="datas.desc_exp"></div>
									<!-- <a v-else href="kthy.html?header_cur=2" >
										<img src="img/vipCont.jpg " >
									</a> -->
									<div v-else @click="gtktvip" class="cpointer">
										<img src="img/vipCont.jpg " >
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="qnhzRight_ct">
						<div class="rTit_ct flex">
							<img src="img/qnhz_bq.jpg" >
							<span>{{hz_type==1?'推荐项目':'推荐服务'}}</span>
						</div>
						<div class="tjgzLists_ct flex ju_b" v-for="item in datas_list" @click="jump_fuc(item)">
							<div class="flex rlcoont_ct">
								<span>{{item.title}}</span>
								<span>{{item.area}}{{item.province}}{{item.city}}{{item.district}}</span>
								<span>{{item.work_time}}</span>
							</div>
							<div v-if="item.mobile" class="rrbox_ct cpointer" @click.stop="opentel(item.mobile)">
								<span>合作洽谈</span>
							</div>
						</div>
						
						<div class="w100" v-if="datas_list.length==0" style="line-height: 100px;text-align: center;color: #999;">暂无数据</div>
					</div>
				</div>
				
			</div>
		</div>
		
		<include src="./common/footer_f.html"></include>
		<include src="./common/footer.html"></include>
		
		
		<script type="text/javascript">
			$(function() {
				app.id=getNowCanshu().id
				if(getNowCanshu().hz_type==1){
					app.hz_type=1
					getdata()
				}else{
					app.hz_type=0
					getdata()
				}
				
				getdatalist()
			})
			var that
			var app = new Vue({
				el: '#qnhzCot_ct',
				data: {
					id:'',
					hz_type:0,
					isVip: false,
					datas:'',
					user_datas:'',
					token:'',
					datas_list:[],
					mytype:''
				},
				created: function() {
					console.log('h_header')
					that=this
					that.BaseConfig=JSON.parse(storage_fuc.getItem("BaseConfig"))
					if(getNowCanshu().mytype){
						that.mytype=getNowCanshu().mytype
					}
					if(storage_fuc.getItem("user")){
						login_m(function(res){
							that.user_datas=res.data
							that.token=res.token
						})
						
					}
				},
				methods:{
					gtktvip:function(){
						if(storage_fuc.getItem("user")){
							window.location = 'kthy.html?header_cur=2'
						}else{
							window.location.replace('login.html')
							return
						}
					},
					jump_fuc:function(item){
						if(that.hz_type==0){
							jump('qnhz_xq.html?header_cur=2&id='+item.article_service_id+'&hz_type='+that.hz_type)
						}else{
							jump('qnhz_xq.html?header_cur=2&id='+item.article_need_id+'&hz_type='+that.hz_type)
						}
					},
					opentel:function(tel){
						layer.confirm(tel, {
							title:'联系电话',
							btn: ['关闭'] //按钮
						}, function() {
							// layer.msg('操作成功');
							layer.closeAll()
						});
					},
					vip:function(){
						this.isVip = !this.isVip
						console.log(this.isVip)
					},
					collect:function(){
						var datas={
							object_id:that.id,
							type:app.hz_type==0?2:3
						}
						jkurl='/Member.MemberCollect/collect'
						_post(jkurl,datas,function(res){
							 if (res.status == 200){
								 // console.log(res.data.list)
								 // app.datas=res.data
								  getdata()
							 }
						})
					},
					deleteCollect:function(){
						var datas={
							object_id:app.id,
							
							type:app.hz_type==0?2:3
						}
						jkurl='/Member.MemberCollect/deleteCollect'
						_post(jkurl,datas,function(res){
							 if (res.status == 200){
								 // console.log(res.data.list)
								 // app.datas=res.data
								 getdata()
							 }
						})
					},
					report_fuc:function(){
						//prompt层
						
						layer.prompt({title: '请输入举报内容', formType: 2}, function(text, index){
						  
							var datas={
								article_service_id:that.id,
								report_content:text
							}
							var jkurl='/Article.ArticleService/report'
							if(that.hz_type==1){
								datas={
									article_need_id:that.id,
									report_content:text
								}
								jkurl='/Article.ArticleNeed/report'
							}
							
							_post(jkurl,datas,function(res){
								 if (res.status == 200){
									 // console.log(res.data.list)
									 // app.datas=res.data
									 layer.close(index);
									 layer.msg('提交成功');
								 }
							})
						  // layer.msg('演示完毕！您的口令：'+ pass +'<br>您最后写下了：'+text);
						});
						
					},
				}
			})
			function getdata(){
				var datas={
					article_service_id:app.id
				}
				var jkurl='/Article.ArticleService/view'
				if(app.hz_type==1){
					datas={
						article_need_id:app.id
					}
					jkurl='/Article.ArticleNeed/view'
				}
				if(getNowCanshu().mytype==1){
					jkurl='/Article.ArticleService/memberView'
					if(app.hz_type==1){
						jkurl='/Article.ArticleNeed/memberView'
					}
				}
				_get(jkurl,datas,function(res){
					 if (res.status == 200){
						 console.log(res.data.list)
						 app.datas=res.data
					 }
				})
			}
			function getdatalist(){
				var datas={
					limit:10,
					page:1,
					is_recommend:1
				}
				var jkurl='/Article.ArticleService/index'
				if(app.hz_type==1){
					jkurl='/Article.ArticleNeed/index'
				}
				_get(jkurl,datas,function(res){
					 if (res.status == 200){
						 console.log(res.data.list)
						 that.datas_list=res.data.list
						
					 }
				})
			}
		</script>
	</body>
</html>
